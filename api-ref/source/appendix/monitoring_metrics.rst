:original_name: elb_fl_0002.html

.. _elb_fl_0002:

Monitoring Metrics
==================

Overview
--------

This section describes the namespace, the metrics that can be monitored by Cloud Eye, and dimensions of these metrics. You can use APIs provided by Cloud Eye to query the metrics of a monitored object and generated alarms.

Namespace
---------

SYS.ELB

Metrics
-------

.. table:: **Table 1** Metrics supported by ELB

   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | Metric ID                                                                                          | Name                          | Description                                                                                                                                  | Value        | Monitored Object | Monitoring Period |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  | **(Raw Data)**    |
   +====================================================================================================+===============================+==============================================================================================================================================+==============+==================+===================+
   | m1_cps                                                                                             | Concurrent Connections        | Load balancing at Layer 4: total number of TCP and UDP connections from the monitored object to backend servers                              | >= 0         | -  Load balancer | 1 minute          |
   |                                                                                                    |                               |                                                                                                                                              |              | -  Listener      |                   |
   |                                                                                                    |                               | Load balancing at Layer 7: total number of TCP connections from the clients to the monitored object                                          |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: N/A                                                                                                                                    |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m2_act_conn                                                                                        | Active Connections            | Number of TCP and UDP connections in the **ESTABLISHED** state between the monitored object and backend servers                              | >= 0         |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | You can run the following command to view the connections (both Windows and Linux servers):                                                  |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | .. code-block::                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               |    netstat -an                                                                                                                               |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: N/A                                                                                                                                    |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m3_inact_conn                                                                                      | Inactive Connections          | Number of TCP connections between the monitored object and backend servers except those in the **ESTABLISHED** state                         | >= 0         |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | You can run the following command to view the connections (both Windows and Linux servers):                                                  |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | .. code-block::                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               |    netstat -an                                                                                                                               |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: N/A                                                                                                                                    |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m4_ncps                                                                                            | New Connections               | Number of TCP and UDP connections established between clients and the monitored object per second                                            | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m5_in_pps                                                                                          | Incoming Packets              | Number of packets received by the monitored object per second                                                                                | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Packet/s                                                                                                                               |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m6_out_pps                                                                                         | Outgoing Packets              | Number of packets sent from the monitored object per second                                                                                  | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Packet/s                                                                                                                               |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m7_in_Bps                                                                                          | Inbound Rate                  | Traffic used for accessing the monitored object from the Internet per second                                                                 | >= 0 bytes/s |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: byte/s                                                                                                                                 |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m8_out_Bps                                                                                         | Outbound Rate                 | Traffic used by the monitored object to access the Internet per second                                                                       | >= 0 bytes/s |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: byte/s                                                                                                                                 |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m9_abnormal_servers                                                                                | Unhealthy Servers             | Number of unhealthy backend servers associated with the monitored object                                                                     | >= 0         | -  Load balancer | 1 minute          |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: N/A                                                                                                                                    |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | ma_normal_servers                                                                                  | Healthy Servers               | Number of healthy backend servers associated with the monitored object                                                                       | >= 0         |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: N/A                                                                                                                                    |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | **Layer 7 metrics: These metrics are available only when the frontend protocol is HTTP or HTTPS.** |                               |                                                                                                                                              |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | mb_l7_qps                                                                                          | Layer-7 Query Rate            | Number of requests the monitored object receives per second                                                                                  | >= 0/second  | -  Load balancer | 1 minute          |
   |                                                                                                    |                               |                                                                                                                                              |              | -  Listener      |                   |
   |                                                                                                    |                               | Unit: Query/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | mc_l7_http_2xx                                                                                     | 2xx Status Codes              | Number of 2xx status codes returned by the monitored object                                                                                  | >= 0/second  | -  Load balancer | 1 minute          |
   |                                                                                                    |                               |                                                                                                                                              |              | -  Listener      |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | md_l7_http_3xx                                                                                     | 3xx Status Codes              | Number of 3xx status codes returned by the monitored object                                                                                  | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | me_l7_http_4xx                                                                                     | 4xx Status Codes              | Number of 4xx status codes returned by the monitored object                                                                                  | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | mf_l7_http_5xx                                                                                     | 5xx Status Codes              | Number of 5xx status codes returned by the monitored object                                                                                  | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m10_l7_http_other_status                                                                           | Other Status Codes            | Number of status codes returned by the monitored object except 2xx, 3xx, 4xx, and 5xx status codes                                           | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m11_l7_http_404                                                                                    | 404 Not Found                 | Number of 404 Not Found status codes returned by the monitored object                                                                        | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m12_l7_http_499                                                                                    | 499 Client Closed Request     | Number of 499 Client Closed Request status codes returned by the monitored object                                                            | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m13_l7_http_502                                                                                    | 502 Bad Gateway               | Number of 502 Bad Gateway status codes returned by the monitored object                                                                      | >= 0/second  |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: Count/s                                                                                                                                |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+
   | m14_l7_rt                                                                                          | Average Layer-7 Response Time | Average response time of the monitored object                                                                                                | >= 0 ms      |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | The response time starts when the monitored object receives requests from the clients and ends when it returns all responses to the clients. |              |                  |                   |
   |                                                                                                    |                               |                                                                                                                                              |              |                  |                   |
   |                                                                                                    |                               | Unit: ms                                                                                                                                     |              |                  |                   |
   +----------------------------------------------------------------------------------------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+--------------+------------------+-------------------+

**a**: If a service is being monitored from multiple dimensions, include all dimensions when you use APIs to query the metrics.

-  Example of querying a single metric from both dimensions: dim.0=lbaas_instance_id,223e9eed-2b02-4ed2-a126-7e806a6fee1f&dim.1=lbaas_listener_id,3baa7335-8886-4867-8481-7cbba967a917

-  Example of querying metrics in batches from both dimensions:

   .. code-block::

      "dimensions": [
      {
      "name": "lbaas_instance_id",
      "value": "223e9eed-2b02-4ed2-a126-7e806a6fee1f"
      }
      {
      "name": "lbaas_listener_id",
      "value": "3baa7335-8886-4867-8481-7cbba967a917"
      }
      ],

Dimensions
----------

================= =========================================
Key               Value
================= =========================================
lbaas_instance_id Load balancer ID
lbaas_listener_id ID of a listener added to a load balancer
lbaas_pool_id     Backend server group ID
================= =========================================
